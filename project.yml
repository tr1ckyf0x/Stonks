name: "Stonks"

settings:
  base:
    DEBUG_INFORMATION_FORMAT: dwarf-with-dsym
    CLANG_ANALYZER_LOCALIZABILITY_NONLOCALIZED: YES
    CLANG_ANALYZER_LOCALIZABILITY_EMPTY_CONTEXT: YES
    CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER: YES
    ENABLE_HARDENED_RUNTIME: YES
    DEVELOPMENT_TEAM: SGM5527A99
    CODE_SIGN_STYLE: Automatic
    CODE_SIGN_IDENTITY: "-"
    MARKETING_VERSION: 1.0
    CURRENT_PROJECT_VERSION: 1.0

options:
  deploymentTarget:
    macOS: 12.0
  # preGenCommand: ./Scripts/autogenerated_files.sh

attributes:
  ORGANIZATIONNAME: "Vladislav Lisianskii"

targets:
  Stonks:
    platform: macOS
    type: application
    sources:
      - path: "Stonks"
        excludes:
          - "Packages/**/"
    dependencies:
      - target: StonksWidget

    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: com.tr1ckyf0x.stonks
        CODE_SIGN_ENTITLEMENTS: "Stonks/Stonks.entitlements"
        DEVELOPMENT_ASSET_PATHS: "\"Stonks/Preview Content\""
        ENABLE_PREVIEWS: YES

  StonksWidget:
    platform: macOS
    type: app-extension
    sources:
      - path: StonksWidget
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: com.tr1ckyf0x.stonks.widget
        CODE_SIGN_ENTITLEMENTS: "StonksWidget/StonksWidget.entitlements"
        OTHER_LDFLAGS: $(inherited) -framework WidgetKit -framework SwiftUI
